<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="style/style_main.css" media="screen" />
<link rel="icon" href="favicon.ico" type="image/load_img/x-icon">

</head>
<body style="margin-top:-80px;margin-bottom:-100px;margin-left:auto; margin-right:auto;padding:100;width:1000">


<div class="text" style="margin-left:100; margin-right:100">

      <p class="intro" style="text-align:center;"><font color="#464241">
      By the time I turned 20 I had lived in 16 cities and 5 countries. <br>A year later I would yet again pack my bags to move to a new continent. <br>This visualization  is intended as a long and ever variable answer to a short question - <i>Where Are You From?</i>

      </p>

</div>


<div class="text" style="margin-left:100; margin-right:100">

    <p class="intro" style="text-align:center;"><span class="intro box" style="text-align:center;"><font color="#464241"><font class="desc">&#x2798;</font><sub><a id="hover"> <font class="desc_small">hover</font></sub></a><font class="desc"> over the maps below and &#x21bb </font><sub><a id="refresh"> <font class="desc_small">refresh</font></a></sub> <font class="desc">the page</font></span></p>

</div>



<script type="text/javascript" src="city_def.js"></script>

<script type="text/javascript">

// Define functions


function onHover(city_tag)
{d = new Date();

    var city_tag_constant_raw = city_tag
    var city_tag_constant = city_tag_constant_raw.replace("_img", "");
        city_tag_constant = city_tag_constant.replace("_iframe", "");
    var city_tag_constant_iframe = city_tag_constant + "_iframe"
  
    var city_tag_list = ["city_1",'city_2',"city_3","city_4","city_5", "city_6", "city_7", "city_8", "city_9","city_10", "city_11", "city_12", "city_13", "city_14", "city_15", "city_16", "city_17", "city_18", "city_19", "city_20"]
    replace_array=$(city_tag_list).not([city_tag_constant]).get();
    var i;
    for (i = 0; i < replace_array.length; i++) { 
       offHover(replace_array[i])
    }

    // change to image tag
     $('#'+city_tag_constant+'_img').replaceWith( '<iframe id="iframe_temp" class="main_frame" frameborder="0" width="190" height="20%" scrolling="no" allowtransparency="true" style="background-color: Black;">');

     $('#iframe_temp').attr("src",eval(city_tag_constant+'_vis'));

      $('#iframe_temp').attr("onmouseenter",'onHover(this.id)');
      $('#iframe_temp').attr("onmouseleave","offHover(this.id)");
      $('#iframe_temp').attr("id",city_tag_constant_iframe);
 
}

function offHover(city_tag)
{

    var city_tag_constant_raw = city_tag
    var city_tag_constant = city_tag_constant_raw.replace("_img", "");
        city_tag_constant = city_tag_constant.replace("_iframe", "");
    var city_tag_constant_img = city_tag_constant + "_img"
    
    // change to image tag
    var $iframe_temp_obj = $('#'+city_tag_constant+'_iframe');
    if ($iframe_temp_obj.length>0) {
    $('#'+city_tag_constant+'_iframe').replaceWith( '<img id="img_temp" width="190" height="20%">' );
 
    $('#img_temp').attr("src",eval(city_tag_constant+'_url'));

    $('#img_temp').attr("onmouseenter","onHover(this.id)");
    $('#img_temp').attr("onmouseleave","offHover(this.id)");
    $('#img_temp').attr("id",city_tag_constant_img);
  }

}


</script>

<div class="row">


    <div class="main_line" style="width:10px; height:400%; position:absolute; margin-left:185px; margin-top:-8px; background-color:white;"></div>
    <div class="main_line" style="width:10px; height:400%; position:absolute; margin-left:378px; margin-top:-8px; background-color:white;"></div>
    <div class="main_line" style="width:10px; height:400%; position:absolute; margin-left:571px; margin-top:-8px; background-color:white;"></div>
    <div class="main_line" style="width:10px; height:400%; position:absolute; margin-left:764px; margin-top:-8px; background-color:white;"></div>

    <img id="city_1_img"   class="main" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png" >
    <img id="temp_1" class="item_1 item" width="190" height="20%" bottom="10px" right="10px" position="absolute" src="image/load_img/placeholder.png">

    <img id="city_2_img" class="main" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_2" class="item_2 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">

    <img id="city_3_img" class="main" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_3" class="item_3 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">

    <img id="city_4_img" class="main" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_4" class="item_4 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">

    <img id="city_5_img" class="main" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_5" class="item_5 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">

</div>


<div class="row">
    
    <div class="main_line" style="width:1000px; height:10px; position:absolute; margin-left:0px; margin-top:-8px; background-color:white;"></div>

    <img id="city_6_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_6" class="item_1 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">

    <img id="city_7_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_7" class="item_2 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_8_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_8" class="item_3 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_9_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_9" class="item_4 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_10_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_10" class="item_5 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

</div>


<div class="row">

    <div class="main_line" style="width:1000px; height:10px; position:absolute; margin-left:0px; margin-top:-8px; background-color:white;"></div>
 
    <img id="city_11_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_11" class="item_1 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">       

    <img id="city_12_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_12" class="item_2 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_13_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_13" class="item_3 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_14_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_14" class="item_4 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_15_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_15" class="item_5 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    


</div>


<div class="row">
      
    <div class="main_line" style="width:1000px; height:10px; position:absolute; margin-left:0px; margin-top:-8px; background-color:white;"></div>

   <img id="city_16_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_16" class="item_1 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_17_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_17" class="item_2 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_18_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_18" class="item_3 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_19_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_19" class="item_4 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <img id="city_20_img" width="190" height="20%" onmouseenter="onHover(this.id);" onmouseleave="offHover(this.id);" src="image/load_img/placeholder.png">
    <img id="temp_20" class="item_5 item" width="190" height="20%" bottom="10px" right="10px" style= 'background-color: white' position="absolute" src="image/load_img/placeholder.png">    

    <div class="main_line" style="width:1000px; height:10px; position:absolute; margin-left:0px; margin-top:-8px; background-color:white;"></div>

</div>
    <p style="text-align:center;"><font class="desc">
     Data: Satellite images are automatically updated&nbsp;&nbsp;||&nbsp;&nbsp;Tools: D3.js, Javascript/jQuery, Google Maps API,  HTML
</p>
<script type="text/javascript">
  
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
if(!is_chrome){
    alert("The visualization is optimized for viewing in Chrome and may not render correctly in other browsers.")
}

$(".item").hide();
// update load img
var load_img       = $('.item');
var load_img_url = ["1",'2',"3","4","5", "6", "7", "8", "9","10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"]

$.each( load_img, function(index) {
    load_img_url_temp = load_img_url[index]
    load_img_url_temp = "image/load_img/placeholder_img_" + load_img_url_temp + ".png"
    $(this).attr("src",load_img_url_temp)
});


// change to image tag
var imgAddresses = [city_1_url,city_2_url,city_3_url,city_4_url,city_5_url, city_6_url, city_7_url, city_8_url, city_9_url,city_10_url, city_11_url, city_12_url, city_13_url, city_14_url, city_15_url, city_16_url, city_17_url, city_18_url, city_19_url, city_20_url]
var imgID = ["1",'2',"3","4","5", "6", "7", "8", "9","10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"]
var imgOrder = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]
var imgOrder_shuffle = imgOrder.sort(function() { return 0.5 - Math.random() });


function loadImage(counter) {

  var url_temp = imgAddresses[imgOrder_shuffle[counter]]
  var img_temp = imgID[imgOrder_shuffle[counter]]

  // Break out if no more images
  if (counter==imgOrder.length) { return; }

  // Grab an image obj
  var I = document.getElementById("city_"+ img_temp + "_img");

  if (I!=null)  {

    // Monitor load or error events, moving on to next image in either case
    I.onload = I.onerror = function() {setTimeout(function() {loadImage(counter+1)},50) }

    //Change source (then wait for event)
    I.src = url_temp;

  } else {
    setTimeout(function() {loadImage(counter+1)},50)
  }
}

var nImages = 20
var loadCounter = 0;
//binds onload event listner to images
$(".item").on("load", function() {
    loadCounter++;
    if(nImages == loadCounter) {
        $(".item").fadeIn(3000)
        setTimeout(function() {loadImage(0)},2000)
        setTimeout(function() {
        $("#refresh").attr("onmouseenter","location.reload()")
        $("#hover").attr("onmouseenter","onHover('city_1_img')")
        $("#hover").attr("onmouseleave","offHover('city_1_img')")
      },1000)
        
    }
}).each(function() {

    // attempt to defeat cases where load event does not fire
    // on cached images
    if(this.complete) $(this).trigger("load");
});





</script>
</body>
</html>
